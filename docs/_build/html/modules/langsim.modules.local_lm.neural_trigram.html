

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Neural trigram trainer &mdash; Langsim 1.0 documentation</title>
  

  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  

  
    <link rel="stylesheet" href="../_static/theme_overrides.css" type="text/css" />
  

  
    <link rel="top" title="Langsim 1.0 documentation" href="../index.html"/>
        <link rel="up" title="Language-model phoneme embeddings" href="langsim.modules.local_lm.html"/>
        <link rel="next" title="Phonological transcription filter" href="langsim.modules.local_lm.phon_filter.html"/>
        <link rel="prev" title="Neural sixgram trainer" href="langsim.modules.local_lm.neural_sixgram2.html"/> 

  
  <script src="../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../index.html" class="icon icon-home"> Langsim
          

          
          </a>

          
            
            
              <div class="version">
                1.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
                <ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="langsim.modules.html">Pimlico modules</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="langsim.modules.cognates.html">Cognate identification</a></li>
<li class="toctree-l2"><a class="reference internal" href="langsim.modules.embedding_map.html">Embedding space mappings</a></li>
<li class="toctree-l2"><a class="reference internal" href="langsim.modules.espeak.html">Espeak</a></li>
<li class="toctree-l2"><a class="reference internal" href="langsim.modules.fake_language.html">Fake language tools</a></li>
<li class="toctree-l2"><a class="reference internal" href="langsim.modules.input.html">Input readers</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="langsim.modules.local_lm.html">Language-model phoneme embeddings</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="langsim.modules.local_lm.neural_sixgram.html">Neural sixgram trainer</a></li>
<li class="toctree-l3"><a class="reference internal" href="langsim.modules.local_lm.neural_sixgram2.html">Neural sixgram trainer</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="">Neural trigram trainer</a><ul class="simple">
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="langsim.modules.local_lm.phon_filter.html">Phonological transcription filter</a></li>
<li class="toctree-l3"><a class="reference internal" href="langsim.modules.local_lm.phoneme_embedding.html">Phoneme embedding filter</a></li>
<li class="toctree-l3"><a class="reference internal" href="langsim.modules.local_lm.plot.html">Plot output from neural ngram models</a></li>
<li class="toctree-l3"><a class="reference internal" href="langsim.modules.local_lm.val_crit_correlation.html">Validation criterion correlation</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="langsim.modules.ngram_counter.html">Ngram counter</a></li>
<li class="toctree-l2"><a class="reference internal" href="langsim.modules.non_overlapping_subsets.html">Non-overlapping subsets</a></li>
<li class="toctree-l2"><a class="reference internal" href="langsim.modules.word2vecf.html">Word2vecf tools</a></li>
<li class="toctree-l2"><a class="reference internal" href="langsim.modules.word_dictionary.html">Word dictionaries</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../api/langsim.html">API docs</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../index.html">Langsim</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          

 



<div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../index.html">Docs</a> &raquo;</li>
      
          <li><a href="langsim.modules.html">Langsim Pimlico modules</a> &raquo;</li>
      
          <li><a href="langsim.modules.local_lm.html">Language-model phoneme embeddings</a> &raquo;</li>
      
    <li>Neural trigram trainer</li>
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="../_sources/modules/langsim.modules.local_lm.neural_trigram.txt" rel="nofollow"> View page source</a>
          
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="module-langsim.modules.local_lm.neural_trigram">
<span id="neural-trigram-trainer"></span><h1>Neural trigram trainer<a class="headerlink" href="#module-langsim.modules.local_lm.neural_trigram" title="Permalink to this headline">¶</a></h1>
<table border="1" class="docutils">
<colgroup>
<col width="23%" />
<col width="77%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td>Path</td>
<td>langsim.modules.local_lm.neural_trigram</td>
</tr>
<tr class="row-even"><td>Executable</td>
<td>yes</td>
</tr>
</tbody>
</table>
<p>A second, cleaned-up implementation of the neural trigram model. This supersedes the original
neural_trigram trainer.</p>
<p>This has been superseded now by neural_sixgram, but I&#8217;m keeping it here, as it is a simpler
model and also seemed to work well, so we might want to try it in future when training on
small datasets.</p>
<div class="section" id="inputs">
<h2>Inputs<a class="headerlink" href="#inputs" title="Permalink to this headline">¶</a></h2>
<table border="1" class="docutils">
<colgroup>
<col width="7%" />
<col width="93%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Name</th>
<th class="head">Type(s)</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>vocabs</td>
<td><code class="xref py py-class docutils literal"><span class="pre">list</span></code> of <code class="xref py py-class docutils literal"><span class="pre">Dictionary</span></code></td>
</tr>
<tr class="row-odd"><td>corpora</td>
<td><code class="xref py py-class docutils literal"><span class="pre">list</span></code> of TarredCorpus&lt;IntegerListsDocumentType&gt;</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="outputs">
<h2>Outputs<a class="headerlink" href="#outputs" title="Permalink to this headline">¶</a></h2>
<table border="1" class="docutils">
<colgroup>
<col width="11%" />
<col width="89%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Name</th>
<th class="head">Type(s)</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>model</td>
<td><code class="xref py py-class docutils literal"><span class="pre">KerasModelBuilderClass</span></code></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="options">
<h2>Options<a class="headerlink" href="#options" title="Permalink to this headline">¶</a></h2>
<table border="1" class="docutils">
<colgroup>
<col width="4%" />
<col width="78%" />
<col width="19%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Name</th>
<th class="head">Description</th>
<th class="head">Type</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>embedding_size</td>
<td>Number of dimensions in the hidden representation. Default: 200</td>
<td>int</td>
</tr>
<tr class="row-odd"><td>plot_freq</td>
<td>Output plots to the output directory while training is in progress. This slows down training if it&#8217;s done very often. Specify how many batches to wait between each plot. Fewer means you get a finer grained picture of the training process, more means training goes faster. 0 (default) turns off plotting</td>
<td>int</td>
</tr>
<tr class="row-even"><td>dropout</td>
<td>Dropout to apply to embeddings during training. Default: 0.3</td>
<td>float</td>
</tr>
<tr class="row-odd"><td>epochs</td>
<td>Max number of training epochs. Default: 5</td>
<td>int</td>
</tr>
<tr class="row-even"><td>predictor_layers</td>
<td>Number and size of layers to use to take a pair of vectors and say whether they belong beside each other. Given as a list of integers. Doesn&#8217;t include the final projection to a single score</td>
<td>comma-separated list of ints</td>
</tr>
<tr class="row-odd"><td>negatives</td>
<td>Determines how negative trigrams are drawn. Choose &#8216;unigram&#8217; to draw three independent phonemes from the unigram distribution of the same language as the positive trigram. Choose &#8216;trigram&#8217; to draw a roughly-pseudo-random-ish trigram from elsewhere in the same corpus as the positive. Note that this interacts with the model variant and some combinations make less, or no, sense. Default: unigram</td>
<td>&#8216;unigram&#8217; or &#8216;trigram&#8217;</td>
</tr>
<tr class="row-even"><td>limit_training</td>
<td>Limit training to this many batches. Default: no limit</td>
<td>int</td>
</tr>
<tr class="row-odd"><td>composition_layers</td>
<td>Number and size of layers to use to combine pairs of characters, given as a list of integers. The final layer must be the same size as the embeddings, so is not included in this list</td>
<td>comma-separated list of ints</td>
</tr>
<tr class="row-even"><td>model_variant</td>
<td>Use one of the alternative model structures that exist in the code from my experiments with different structures. The default (&#8216;original&#8217;) is identical to the original neural trigram model</td>
<td>&#8216;original&#8217;, &#8216;bpr_pairs&#8217;, &#8216;neg_outer&#8217;, &#8216;all_neg_pairs&#8217;, &#8216;all_negs&#8217;, &#8216;bigram&#8217; or &#8216;trigram_only&#8217;</td>
</tr>
<tr class="row-odd"><td>batch</td>
<td>Training batch size. Default: 100</td>
<td>int</td>
</tr>
<tr class="row-even"><td>sim_freq</td>
<td>How often (in batches) to compute the similarity of overlapping phonemes between the languages. -1 (default) means never, 0 means once at the start of each epoch</td>
<td>int</td>
</tr>
<tr class="row-odd"><td>corpus_offset</td>
<td>To avoid training on parallel data, in the case where the input corpora happen to be parallel, jump forward in the second corpus by this number of utterances, putting the skipping utterances at the end instead. Default: 10k utterances</td>
<td>int</td>
</tr>
<tr class="row-even"><td>validation</td>
<td>Number of samples to hold out as a validation set for training. Simply taken from the start of the corpus. Rounded to the nearest number of batches</td>
<td>int</td>
</tr>
</tbody>
</table>
</div>
</div>


           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="langsim.modules.local_lm.phon_filter.html" class="btn btn-neutral float-right" title="Phonological transcription filter" accesskey="n">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="langsim.modules.local_lm.neural_sixgram2.html" class="btn btn-neutral" title="Neural sixgram trainer" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2017, Mark Granroth-Wilding.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../',
            VERSION:'1.0',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="../_static/jquery.js"></script>
      <script type="text/javascript" src="../_static/underscore.js"></script>
      <script type="text/javascript" src="../_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>