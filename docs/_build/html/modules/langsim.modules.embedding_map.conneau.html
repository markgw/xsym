

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Conneau word translation training &mdash; Langsim 1.0 documentation</title>
  

  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  

  
    <link rel="stylesheet" href="../_static/theme_overrides.css" type="text/css" />
  

  
    <link rel="top" title="Langsim 1.0 documentation" href="../index.html"/>
        <link rel="up" title="Embedding space mappings" href="langsim.modules.embedding_map.html"/>
        <link rel="next" title="Conneau trainer" href="langsim.modules.embedding_map.conneau.adversarial.html"/>
        <link rel="prev" title="Embedding space mappings" href="langsim.modules.embedding_map.html"/> 

  
  <script src="../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../index.html" class="icon icon-home"> Langsim
          

          
          </a>

          
            
            
              <div class="version">
                1.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
                <ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="langsim.modules.html">Pimlico modules</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="langsim.modules.cognates.html">Cognate identification</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="langsim.modules.embedding_map.html">Embedding space mappings</a><ul class="current">
<li class="toctree-l3 current"><a class="current reference internal" href="">Conneau word translation training</a><ul>
<li class="toctree-l4"><a class="reference internal" href="langsim.modules.embedding_map.conneau.adversarial.html">Conneau trainer</a></li>
<li class="toctree-l4"><a class="reference internal" href="langsim.modules.embedding_map.conneau.refinement.html">Conneau refinement stage</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="langsim.modules.embedding_map.neighbours.html">Nearest neighbours</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="langsim.modules.espeak.html">Espeak</a></li>
<li class="toctree-l2"><a class="reference internal" href="langsim.modules.fake_language.html">Fake language tools</a></li>
<li class="toctree-l2"><a class="reference internal" href="langsim.modules.input.html">Input readers</a></li>
<li class="toctree-l2"><a class="reference internal" href="langsim.modules.local_lm.html">Language-model phoneme embeddings</a></li>
<li class="toctree-l2"><a class="reference internal" href="langsim.modules.ngram_counter.html">Ngram counter</a></li>
<li class="toctree-l2"><a class="reference internal" href="langsim.modules.non_overlapping_subsets.html">Non-overlapping subsets</a></li>
<li class="toctree-l2"><a class="reference internal" href="langsim.modules.word2vecf.html">Word2vecf tools</a></li>
<li class="toctree-l2"><a class="reference internal" href="langsim.modules.word_dictionary.html">Word dictionaries</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../api/langsim.html">API docs</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../index.html">Langsim</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          

 



<div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../index.html">Docs</a> &raquo;</li>
      
          <li><a href="langsim.modules.html">Langsim Pimlico modules</a> &raquo;</li>
      
          <li><a href="langsim.modules.embedding_map.html">Embedding space mappings</a> &raquo;</li>
      
    <li>Conneau word translation training</li>
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="../_sources/modules/langsim.modules.embedding_map.conneau.txt" rel="nofollow"> View page source</a>
          
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="module-langsim.modules.embedding_map.conneau">
<span id="conneau-word-translation-training"></span><h1>Conneau word translation training<a class="headerlink" href="#module-langsim.modules.embedding_map.conneau" title="Permalink to this headline">¶</a></h1>
<table border="1" class="docutils">
<colgroup>
<col width="24%" />
<col width="76%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td>Path</td>
<td>langsim.modules.embedding_map.conneau</td>
</tr>
<tr class="row-even"><td>Executable</td>
<td>yes</td>
</tr>
<tr class="row-odd"><td>Stages</td>
<td>adversarial, refinement</td>
</tr>
</tbody>
</table>
<div class="section" id="inputs">
<h2>Inputs<a class="headerlink" href="#inputs" title="Permalink to this headline">¶</a></h2>
<table border="1" class="docutils">
<colgroup>
<col width="14%" />
<col width="86%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Name</th>
<th class="head">Type(s)</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>vectors1</td>
<td><code class="xref py py-class docutils literal"><span class="pre">Embeddings</span></code></td>
</tr>
<tr class="row-odd"><td>vectors2</td>
<td><code class="xref py py-class docutils literal"><span class="pre">Embeddings</span></code></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="outputs">
<h2>Outputs<a class="headerlink" href="#outputs" title="Permalink to this headline">¶</a></h2>
<table border="1" class="docutils">
<colgroup>
<col width="16%" />
<col width="84%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Name</th>
<th class="head">Type(s)</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>mapping</td>
<td><code class="xref py py-class docutils literal"><span class="pre">NumpyArray</span></code></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="options">
<h2>Options<a class="headerlink" href="#options" title="Permalink to this headline">¶</a></h2>
<table border="1" class="docutils">
<colgroup>
<col width="8%" />
<col width="84%" />
<col width="8%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Name</th>
<th class="head">Description</th>
<th class="head">Type</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>adversarial_min_freq</td>
<td>Minimum frequency of word in original dataset for it to be included in training. Default: 5 (asin paper)</td>
<td>int</td>
</tr>
<tr class="row-odd"><td>adversarial_weeding_freq</td>
<td>Number of iterations to perform between each time we weed out the least promising models. Default: 1</td>
<td>int</td>
</tr>
<tr class="row-even"><td>adversarial_decay</td>
<td>Level of decay in training. Default: 0.95 (as in paper)</td>
<td>float</td>
</tr>
<tr class="row-odd"><td>adversarial_discriminator_words</td>
<td>Number of most frequent words to draw discriminator samples from. Default: 50k (as in paper)</td>
<td>int</td>
</tr>
<tr class="row-even"><td>adversarial_dropout</td>
<td>Level of dropout noise to apply to input embeddings. Default: 0.1 (as in paper)</td>
<td>float</td>
</tr>
<tr class="row-odd"><td>adversarial_val_crit_lr_red</td>
<td>Halve LR every time val crit decreases between iterations. Default: True</td>
<td>bool</td>
</tr>
<tr class="row-even"><td>adversarial_language_ids</td>
<td>Comma-separated list of IDs to use for the two models that we&#8217;re mapping into a common space. When the mapped space is output, words are distinguished using these IDs. If not given, numeric IDs are used by default</td>
<td>comma-separated list of strings</td>
</tr>
<tr class="row-odd"><td>adversarial_orthogonality</td>
<td>Whether to apply orthogonality constraint between updates. If 0, don&#8217;t apply constraint. Otherwise, value specifies beta parameter. Default: 0.01 (as in paper)</td>
<td>float</td>
</tr>
<tr class="row-even"><td>adversarial_batch</td>
<td>Batch size for training of discriminator and mapping</td>
<td>int</td>
</tr>
<tr class="row-odd"><td>adversarial_iteration_samples</td>
<td>How many samples constitute a single epoch. It&#8217;s unclear from the paper what &#8216;epoch&#8217; means, since the data is being sampled, rather than iterated over. You might want to set this to the same as discriminator_words, which seems to make sense, but I suspect they used a high value. Default: 200k</td>
<td>int</td>
</tr>
<tr class="row-even"><td>adversarial_lr</td>
<td>Learning rate for SGD updates. Default: 0.1 (as in paper)</td>
<td>float</td>
</tr>
<tr class="row-odd"><td>adversarial_discriminator_layers</td>
<td>List of layer sizes for discriminator. Does not include input (embedding size) or output(single value). Default: 2048,2048 (as in paper)</td>
<td>comma-separated list of ints</td>
</tr>
<tr class="row-even"><td>adversarial_iterations</td>
<td>Number of complete training epochs. Fewer might be completed if early stopping is enabled</td>
<td>int</td>
</tr>
<tr class="row-odd"><td>adversarial_smoothing</td>
<td>Smoothing coefficient for discriminator predictions. Default: 0.2 (as in paper)</td>
<td>float</td>
</tr>
<tr class="row-even"><td>adversarial_tolerance</td>
<td>Number of iterations to continue training without an improvement in the validation criterion. If we perform this number of operations without the val crit increasing, give up and stop. Set to 0 to disable early stopping altogether. Default: 5</td>
<td>int</td>
</tr>
<tr class="row-odd"><td>adversarial_k</td>
<td>K parameter for CSLS metric used in computing unsupervised validation criterion</td>
<td>int</td>
</tr>
<tr class="row-even"><td>adversarial_num_starts</td>
<td>Number of different models to initialize and start training. After each training iteration (for every model), half of the models are thrown away, based on the validation criterion, keeping just the most promising. After a few iterations, just a single model is left and this is trained to completion. It is best to set this to a power of 2. Default: 8</td>
<td>int</td>
</tr>
<tr class="row-odd"><td>refinement_k</td>
<td>K parameter for CSLS metric used to build parallel vocabulary</td>
<td>int</td>
</tr>
<tr class="row-even"><td>refinement_language_ids</td>
<td>Comma-separated list of IDs to use for the two models that we&#8217;re mapping into a common space. When the mapped space is output, words are distinguished using these IDs. If not given, numeric IDs are used by default</td>
<td>comma-separated list of strings</td>
</tr>
<tr class="row-odd"><td>refinement_num_most_freq</td>
<td>Number of most frequent words to consider as translation pairs when building the parallel vocabulary. The paper says they use only the most frequent words, but not how many. My best guess is the same limit used when training the discriminator, 50k. Default: 50k</td>
<td>int</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="submodules">
<h2>Submodules<a class="headerlink" href="#submodules" title="Permalink to this headline">¶</a></h2>
<div class="toctree-wrapper compound">
<ul>
<li class="toctree-l1"><a class="reference internal" href="langsim.modules.embedding_map.conneau.adversarial.html">Conneau trainer</a><ul class="simple">
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="langsim.modules.embedding_map.conneau.refinement.html">Conneau refinement stage</a><ul class="simple">
</ul>
</li>
</ul>
</div>
</div>
</div>


           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="langsim.modules.embedding_map.conneau.adversarial.html" class="btn btn-neutral float-right" title="Conneau trainer" accesskey="n">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="langsim.modules.embedding_map.html" class="btn btn-neutral" title="Embedding space mappings" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2017, Mark Granroth-Wilding.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../',
            VERSION:'1.0',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="../_static/jquery.js"></script>
      <script type="text/javascript" src="../_static/underscore.js"></script>
      <script type="text/javascript" src="../_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>