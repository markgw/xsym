Conneau refinement stage
~~~~~~~~~~~~~~~~~~~~~~~~

.. py:module:: langsim.modules.embedding_map.conneau.refinement

+------------+--------------------------------------------------+
| Path       | langsim.modules.embedding_map.conneau.refinement |
+------------+--------------------------------------------------+
| Executable | yes                                              |
+------------+--------------------------------------------------+


Inputs
======

+----------+---------------------------------------------------------------+
| Name     | Type(s)                                                       |
+==========+===============================================================+
| vectors1 | :class:`Embeddings <pimlico.datatypes.embeddings.Embeddings>` |
+----------+---------------------------------------------------------------+
| vectors2 | :class:`Embeddings <pimlico.datatypes.embeddings.Embeddings>` |
+----------+---------------------------------------------------------------+
| mapping  | :class:`NumpyArray <pimlico.datatypes.arrays.NumpyArray>`     |
+----------+---------------------------------------------------------------+

Outputs
=======

+-----------------+---------------------------------------------------+
| Name            | Type(s)                                           |
+=================+===================================================+
| mapping         | :class:`~pimlico.datatypes.arrays.NumpyArray`     |
+-----------------+---------------------------------------------------+
| vectors2_mapped | :class:`~pimlico.datatypes.embeddings.Embeddings` |
+-----------------+---------------------------------------------------+

Options
=======

+---------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+---------------------------------+
| Name          | Description                                                                                                                                                                                                                                                           | Type                            |
+===============+=======================================================================================================================================================================================================================================================================+=================================+
| k             | K parameter for CSLS metric used to build parallel vocabulary                                                                                                                                                                                                         | int                             |
+---------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+---------------------------------+
| language_ids  | Comma-separated list of IDs to use for the two models that we're mapping into a common space. When the mapped space is output, words are distinguished using these IDs. If not given, numeric IDs are used by default                                                 | comma-separated list of strings |
+---------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+---------------------------------+
| num_most_freq | Number of most frequent words to consider as translation pairs when building the parallel vocabulary. The paper says they use only the most frequent words, but not how many. My best guess is the same limit used when training the discriminator, 50k. Default: 50k | int                             |
+---------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+---------------------------------+

